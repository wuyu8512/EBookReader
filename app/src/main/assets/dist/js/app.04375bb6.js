(function(t){function e(e){for(var o,r,u=e[0],c=e[1],d=e[2],f=0,s=[];f<u.length;f++)r=u[f],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&s.push(a[r][0]),a[r]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);l&&l(e);while(s.length)s.shift()();return i.push.apply(i,d||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,r=1;r<n.length;r++){var u=n[r];0!==a[u]&&(o=!1)}o&&(i.splice(e--,1),t=c(c.s=n[0]))}return t}var o={},r={app:0},a={app:0},i=[];function u(t){return c.p+"js/"+({}[t]||t)+"."+{"chunk-2d21a3d2":"dc2ff89d","chunk-37c86567":"c7209975","chunk-159f59cc":"fd1dc7c3","chunk-326537ca":"e1a14e5b"}[t]+".js"}function c(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(t){var e=[],n={"chunk-37c86567":1,"chunk-159f59cc":1,"chunk-326537ca":1};r[t]?e.push(r[t]):0!==r[t]&&n[t]&&e.push(r[t]=new Promise((function(e,n){for(var o="css/"+({}[t]||t)+"."+{"chunk-2d21a3d2":"31d6cfe0","chunk-37c86567":"01ec36f6","chunk-159f59cc":"1eac7e30","chunk-326537ca":"921bfcb3"}[t]+".css",a=c.p+o,i=document.getElementsByTagName("link"),u=0;u<i.length;u++){var d=i[u],f=d.getAttribute("data-href")||d.getAttribute("href");if("stylesheet"===d.rel&&(f===o||f===a))return e()}var s=document.getElementsByTagName("style");for(u=0;u<s.length;u++){d=s[u],f=d.getAttribute("data-href");if(f===o||f===a)return e()}var l=document.createElement("link");l.rel="stylesheet",l.type="text/css",l.onload=e,l.onerror=function(e){var o=e&&e.target&&e.target.src||a,i=new Error("Loading CSS chunk "+t+" failed.\n("+o+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=o,delete r[t],l.parentNode.removeChild(l),n(i)},l.href=a;var p=document.getElementsByTagName("head")[0];p.appendChild(l)})).then((function(){r[t]=0})));var o=a[t];if(0!==o)if(o)e.push(o[2]);else{var i=new Promise((function(e,n){o=a[t]=[e,n]}));e.push(o[2]=i);var d,f=document.createElement("script");f.charset="utf-8",f.timeout=120,c.nc&&f.setAttribute("nonce",c.nc),f.src=u(t);var s=new Error;d=function(e){f.onerror=f.onload=null,clearTimeout(l);var n=a[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+r+")",s.name="ChunkLoadError",s.type=o,s.request=r,n[1](s)}a[t]=void 0}};var l=setTimeout((function(){d({type:"timeout",target:f})}),12e4);f.onerror=f.onload=d,document.head.appendChild(f)}return Promise.all(e)},c.m=t,c.c=o,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)c.d(n,o,function(e){return t[e]}.bind(null,o));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="",c.oe=function(t){throw console.error(t),t};var d=window["webpackJsonp"]=window["webpackJsonp"]||[],f=d.push.bind(d);d.push=e,d=d.slice();for(var s=0;s<d.length;s++)e(d[s]);var l=f;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"402c":function(t,e,n){"use strict";n.d(e,"b",(function(){return u}));var o=n("2b0e"),r=n("f309"),a=n("0fd9"),i=n("94ed");o["a"].use(r["a"],{components:{VRow:a["a"]}}),e["a"]=new r["a"]({});var u={mdiArrowLeft:i["a"],mdiMagnify:i["e"],mdiFormatSize:i["d"],mdiFormatListBulleted:i["c"],mdiWhiteBalanceSunny:i["f"],mdiDotsVertical:i["b"]}},4360:function(t,e,n){"use strict";var o=n("2b0e"),r=n("2f62"),a=(n("c740"),n("c975"),n("ac1f"),n("1276"),n("3835")),i=n("ae39"),u=n("8f8f"),c={state:{book:null,bookName:null,cover:null,navigation:null,metadata:null,bookAvailable:!1,readProgress:0,section:1,menuShow:!1,fontSettingShow:!1,sidebarShow:!1,fontSize:16},getters:{readSection:function(t){var e,n;return t.navigation?null===(e=t.navigation[t.section-1])||void 0===e?void 0:e.label:null===(n=t.metadata)||void 0===n?void 0:n.title},section:function(t){return t.section},fontSize:function(t){return t.fontSize},fontSettingShow:function(t){return t.fontSettingShow},book:function(t){return t.book},menuShow:function(t){return t.menuShow},sidebarShow:function(t){return t.sidebarShow},bookAvailable:function(t){return t.bookAvailable},navigation:function(t){return t.navigation}},mutations:{updateBookName:function(t,e){t.bookName=e},updateFontSize:function(t,e){t.fontSize=e},updateFontSettingShow:function(t,e){t.fontSettingShow=e},updateBook:function(t,e){t.book=e},updateCover:function(t,e){t.cover=e},updateNavigation:function(t,e){t.navigation=e},updateMetadata:function(t,e){t.metadata=e},updateBookAvailable:function(t,e){t.bookAvailable=e},updateReadProgress:function(t,e){t.readProgress=e},updateSection:function(t,e){t.section=e},updateMenuShow:function(t,e){t.menuShow=e},updateSidebarShow:function(t,e){t.sidebarShow=e}},actions:{refreshLocation:function(t,e){var n=t.commit,o=t.state,r=Object(a["a"])(e,3),c=r[0],d=r[1],f=r[2],s=void 0===f||f,l=o.book.rendition.currentLocation();if(console.log(l),l&&l.start){var p=l.start.cfi;if(s&&Object(i["g"])(o.bookName,p),o.bookAvailable){if(c)for(var v=new u["a"](l.end.cfi),h=0,g=!0,m=function(t){var e=o.navigation[t],r=e.href;if(-1!==r.indexOf("#")&&(r=r.split("#")[0]),e.cfi)h=v.compare(e.cfi,v);else{var a=o.book.spine.spineItems.findIndex((function(t){return t.href===r}));h=a>v.spinePos?1:-1}if(g){if(g=!1,1===h)return n("updateSection",0),"break"}else if(t===o.navigation.length-1&&n("updateSection",t+1),1===h)return n("updateSection",t),"break"},b=0;b<o.navigation.length;++b){var k=m(b);if("break"===k)break}d&&n("updateReadProgress",Math.floor(1e3*l.start.percentage))}}},display:function(t,e){t.commit;var n=t.state;return n.book.rendition.display(e)},setFontSize:function(t,e){var n=t.commit,o=t.state;o.book.rendition.themes.fontSize(e+"px"),n("updateFontSize",e),Object(i["f"])(e)}},modules:{}},d=(n("99af"),n("4de4"),n("7db0"),n("d81d"),n("b0c0"),n("d3b7"),n("96cf"),n("1da1")),f=n("5530"),s=n("2909"),l=n("d4ec"),p=n("bee2"),v=function(){function t(){Object(l["a"])(this,t)}return Object(p["a"])(t,null,[{key:"read",value:function(t){try{return JSON.parse(window.localStorage.getItem(t))}catch(e){console.log(e)}return null}},{key:"write",value:function(t,e){try{null==e?localStorage.removeItem(t):localStorage.setItem(t,JSON.stringify(e))}catch(n){console.log(n)}}}]),t}();n("4d63"),n("25f0"),n("5319");function h(t){return(t||"").replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function g(t,e){/(y+)/.test(e)&&(e=e.replace(RegExp.$1,"".concat(t.getFullYear()).substr(4-RegExp.$1.length)));var n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getMilliseconds()};for(var o in n)if(new RegExp("(".concat(o,")")).test(e)){var r="".concat(n[o]),a=r.length;"s+"==o&&a--,e=e.replace(RegExp.$1,1===RegExp.$1.length?r:"00".concat(r).substr(a))}return e}function m(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0,n="x"==t?e:3&e|8;return n.toString(16)}))}var b=n("6821"),k=n.n(b),w=n("1fb5"),y=n("a211"),S="EBookReader_BOOK",x={state:{list:v.read(S)||[],coverCache:{}},getters:{localBookExist:function(t,e){return e.allGroup.length>0||e.allList.length>0},BookList:function(t){return t.list},hasGroup:function(t,e){return function(t){return null===t||!!e.BookList.find((function(e){return e.gid===t}))}},groupTitleExist:function(t,e){return function(t,n){var o=h(t);return 0===o.length||!!e.BookList.find((function(t){return t.gid!==n&&t.book_title===o}))}},cacheTitleExist:function(t,e){return function(t,n){var o=h(t);return 0===o.length||(!!e.allGroup.find((function(t){return t.gid!==n&&t.data.title===o}))||!!e.BookListCache.find((function(t){return!t.bid&&t.gid!==n&&t.data.title===o})))}},hasBook:function(t,e){return function(t){return!!e.BookList.find((function(e){return e.gid?!!e.data.find((function(e){return e.book_path===t})):e.book_path===t}))}},findBook:function(t,e){return function(t){return e.allList.find((function(e){return e.book_path===t}))}},findGroup:function(t,e){return function(t){return e.BookList.find((function(e){return e.gid===t}))}},mapList:function(t,e){return function(t){return{list:e.allList.filter((function(e){return!!t.find((function(t){var n=t.bid,o=t.gid;return e.bid===n||!n&&e.gid===o}))})),group:e.allGroup.filter((function(e){return!!t.find((function(t){var n=t.bid,o=t.gid;return!n&&e.gid===o}))}))}}},coverCache:function(t){return t.coverCache}},mutations:{updateBookList:function(t,e){t.list=e||[],v.write(S,t.list)},updateCoverCache:function(t,e){o["a"].set(t.coverCache,e.name,e.data)}},actions:{addBookGroup:function(t,e){var n=t.commit,o=t.getters;t.dispatch;if(o.groupTitleExist(e.group_name))return!1;var r=[e].concat(Object(s["a"])(o.BookList));return n("updateBookList",r),!0},removeBookGroup:function(t,e){var n=t.commit,o=t.getters;t.dispatch;Array.isArray(e)||(e=[e]);var r=o.allGroup.filter((function(t){return!e.find((function(e){return e.gid===t.gid}))}));return n("updateBookGroup",r),!0},updateBookGroup:function(t,e){var n=t.commit,o=t.getters;t.dispatch;Array.isArray(e)||(e=[e]);var r=o.allGroup.map((function(t){var n=e.find((function(e){return e.gid===t.gid}));return n&&!o.groupTitleExist(n.data.title,n.gid)?Object(f["a"])(Object(f["a"])(Object(f["a"])({},t),n),{},{last_update_time:g(new Date,"yyyy-MM-dd hh:mm:sss"),data:Object(f["a"])(Object(f["a"])({},t.data),n.data)}):t}));return n("updateBookGroup",r),!0},addToBook:function(t,e){var n=t.commit,o=t.getters,r=(t.dispatch,[e].concat(Object(s["a"])(o.BookList)));return n("updateBookList",r),!0},removeFromBook:function(t,e){var n=t.commit,o=t.getters;t.dispatch;Array.isArray(e)||(e=[e]);var r=o.allList.filter((function(t){return!e.find((function(e){return e.bid===t.bid}))}));return n("updateBookList",r),!0},updateBook:function(t,e){var n=t.commit,o=t.getters;t.dispatch;Array.isArray(e)||(e=[e]);var r=o.allList.map((function(t){var n=e.find((function(e){return e.bid===t.bid}));return n&&o.hasGroup(n.gid)?Object(f["a"])(Object(f["a"])(Object(f["a"])({},t),{},{last_update_time:g(new Date,"yyyy-MM-dd hh:mm:sss")},n),{},{data:Object(f["a"])(Object(f["a"])({},t.data),n.data)}):t}));return n("updateBookList",r),!0}}};window.addToBook=function(t,e){if(!B.getters.hasBook(t)){var n=new Date,o={book_title:e,book_path:t,add_time:"".concat(n.getFullYear(),"-").concat(n.getMonth()+1,"-").concat(n.getDate()),book_cover:k()(e)};B.dispatch("addToBook",o)}},window.addToBooks=function(t,e){var n={};n.gid=m(),n.group_name=t,n.data=JSON.parse(e),B.dispatch("addBookGroup",n)},window.readFileResult=function(t,e,n){switch(t){case 0:n=Object(w["toByteArray"])(n);var o=new y["a"];o.open(n.buffer).then(Object(d["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o.loaded.cover;case 2:return n=t.sent,t.next=5,o.archive.getBase64(n||"/OEBPS/Images/cover.jpg");case 5:r=t.sent,new Promise((function(){device.saveFile(e,"Pictures",r)})),B.commit("updateCoverCache",{name:e,data:r});case 8:case"end":return t.stop()}}),t)}))));break;case 1:B.commit("updateCoverCache",{name:e,data:"data:image/jpeg;base64,"+n});break}},o["a"].use(r["a"]);var B=e["a"]=new r["a"].Store({state:{},mutations:{},actions:{},modules:{read:c,book:x}})},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("navigation",[n("v-app",[n("router-view")],1)],1)},a=[],i=n("2877"),u=n("6544"),c=n.n(u),d=n("7496"),f={},s=Object(i["a"])(f,r,a,!1,null,null,null),l=s.exports;c()(s,{VApp:d["a"]});var p=n("402c"),v=(n("d3b7"),n("8c4f"));o["a"].use(v["a"]);var h=[{path:"/read/:uri?/:name?",name:"Read",component:function(){return Promise.all([n.e("chunk-37c86567"),n.e("chunk-326537ca")]).then(n.bind(null,"c844"))},props:!0},{path:"/",name:"Home",redirect:"/bookshelf",component:function(){return n.e("chunk-2d21a3d2").then(n.bind(null,"bb51"))},children:[{path:"bookshelf/:gid?",name:"Bookshelf",component:function(){return Promise.all([n.e("chunk-37c86567"),n.e("chunk-159f59cc")]).then(n.bind(null,"2427"))},props:!0}]}],g=new v["a"]({routes:h,scrollBehavior:function(t,e,n){return n||{x:0,y:0}}}),m=g,b=n("4360"),k=n("6944"),w=n.n(k),y=(n("0808"),n("1e96"));o["a"].config.productionTip=!1,o["a"].use(w.a,{defaultOptions:{navbar:!1}}),o["a"].use(y["a"],{router:m}),new o["a"]({vuetify:p["a"],router:m,store:b["a"],render:function(t){return t(l)}}).$mount("#app")},ae39:function(t,e,n){"use strict";n.d(e,"h",(function(){return i})),n.d(e,"b",(function(){return u})),n.d(e,"g",(function(){return c})),n.d(e,"a",(function(){return d})),n.d(e,"c",(function(){return f})),n.d(e,"f",(function(){return s})),n.d(e,"d",(function(){return v})),n.d(e,"e",(function(){return h}));n("99af"),n("d81d"),n("d3b7"),n("2ca0"),n("96cf"),n("1da1");var o,r=n("2909"),a=(n("1fb5"),n("a211"),n("6821"),n("4360"));function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:160,n=new Date;return function(){var o=this,r=arguments,a=new Date-0;a-n>=e&&(t.apply(o,r),n=a)}}function u(t){var e;return(e=[]).concat.apply(e,Object(r["a"])(t.map((function(t){var e;return(e=[]).concat.apply(e,[t].concat(Object(r["a"])(u(t.subitems))))}))))}function c(t,e){var n=JSON.parse(localStorage.getItem("Reading_Record")||"{}");n[t]||(n[t]={}),n[t].cfi=e,localStorage.setItem("Reading_Record",JSON.stringify(n))}function d(t){var e,n=JSON.parse(localStorage.getItem("Reading_Record")||"{}");return null===(e=n[t])||void 0===e?void 0:e.cfi}function f(){return localStorage.getItem("Reading_FontSize")||16}function s(t){localStorage.setItem("Reading_FontSize",t)}var l=null===(o=window.device)||void 0===o?void 0:o.getExternalFilesDir("Pictures"),p={};function v(t,e){return p[e]?p[e]:new Promise((function(n,o){a["a"].getters.coverCache[t]&&n(),t.startsWith("http")&&(a["a"].commit("updateCoverCache",{name:t,data:t}),n());var r=l+"/"+t;if(window.device)if(device.fileExits(r))if("file://"!==window.location.origin)device.readFileAsync(1,t,r),n();else{var i="file://"+r;a["a"].commit("updateCoverCache",{name:t,data:i}),n(i)}else p[e]=this,device.readFileAsync(0,t,e),n();else{var u="file://"+r;a["a"].commit("updateCoverCache",{name:t,data:u}),n()}}))}function h(t){var e;null===(e=window.device)||void 0===e||e.loadBook(t["book_title"],t["book_path"])}}});